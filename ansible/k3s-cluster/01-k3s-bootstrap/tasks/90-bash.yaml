- name: Add kubectl completion and aliases.
  ansible.builtin.blockinfile:
    path: ~/.bashrc
    block: |
      source <(kubectl completion bash)
      alias k=kubectl
      complete -F __start_kubectl k
      alias oc=kubectl
      complete -F __start_kubectl oc

      export KUBECONFIG=/etc/rancher/k3s/k3s.yaml 
    marker: "# {mark} ANSIBLE MANAGED BLOCK kubectl"
    prepend_newline: true
